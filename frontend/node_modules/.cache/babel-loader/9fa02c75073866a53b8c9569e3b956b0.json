{"ast":null,"code":"import { login as loginApi } from '@/api/login';\nimport router from '@/router'; // eslint-disable-next-line\n// import { setTokenTime } from '@/utils/auth'\n\nexport default {\n  namespaced: true,\n  state: () => ({\n    token: localStorage.getItem('token') || ''\n  }),\n  mutations: {\n    setToken(state, token) {\n      console.log('token is' + token);\n      state.token = token;\n      localStorage.setItem('token', token);\n    }\n\n  },\n  actions: {\n    login({\n      commit\n    }, userInfo) {\n      return new Promise((resolve, reject) => {\n        console.log(commit);\n        console.log(userInfo);\n        loginApi(userInfo).then(res => {\n          commit('setToken', res.data); // setTokenTime()\n\n          router.replace('/Main');\n          resolve();\n        }).catch(err => {\n          reject(err);\n        });\n      });\n    },\n\n    logout({\n      commit\n    }) {\n      console.log('log out!');\n      commit('setToken', '');\n      localStorage.clear();\n      router.replace('/');\n    }\n\n  }\n};","map":{"version":3,"names":["login","loginApi","router","namespaced","state","token","localStorage","getItem","mutations","setToken","console","log","setItem","actions","commit","userInfo","Promise","resolve","reject","then","res","data","replace","catch","err","logout","clear"],"sources":["/Users/alzhong/Personal/Projects/FamilyCareInventory/frontend/src/store/modules/app.js"],"sourcesContent":["import { login as loginApi } from '@/api/login'\r\nimport router from '@/router'\r\n// eslint-disable-next-line\r\n// import { setTokenTime } from '@/utils/auth'\r\nexport default {\r\n  namespaced: true,\r\n  state: () => ({\r\n    token: localStorage.getItem('token') || ''\r\n  }),\r\n  mutations: {\r\n    setToken (state, token) {\r\n      console.log('token is' + token)\r\n      state.token = token\r\n      localStorage.setItem('token', token)\r\n    }\r\n  },\r\n  actions: {\r\n    login ({ commit }, userInfo) {\r\n      return new Promise((resolve, reject) => {\r\n        console.log(commit)\r\n        console.log(userInfo)\r\n        loginApi(userInfo)\r\n          .then((res) => {\r\n            commit('setToken', res.data)\r\n            // setTokenTime()\r\n            router.replace('/Main')\r\n            resolve()\r\n          })\r\n          .catch((err) => {\r\n            reject(err)\r\n          })\r\n      })\r\n    },\r\n    logout ({ commit }) {\r\n      console.log('log out!')\r\n      commit('setToken', '')\r\n      localStorage.clear()\r\n      router.replace('/')\r\n    }\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,KAAK,IAAIC,QAAlB,QAAkC,aAAlC;AACA,OAAOC,MAAP,MAAmB,UAAnB,C,CACA;AACA;;AACA,eAAe;EACbC,UAAU,EAAE,IADC;EAEbC,KAAK,EAAE,OAAO;IACZC,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC;EAD5B,CAAP,CAFM;EAKbC,SAAS,EAAE;IACTC,QAAQ,CAAEL,KAAF,EAASC,KAAT,EAAgB;MACtBK,OAAO,CAACC,GAAR,CAAY,aAAaN,KAAzB;MACAD,KAAK,CAACC,KAAN,GAAcA,KAAd;MACAC,YAAY,CAACM,OAAb,CAAqB,OAArB,EAA8BP,KAA9B;IACD;;EALQ,CALE;EAYbQ,OAAO,EAAE;IACPb,KAAK,CAAE;MAAEc;IAAF,CAAF,EAAcC,QAAd,EAAwB;MAC3B,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;QACtCR,OAAO,CAACC,GAAR,CAAYG,MAAZ;QACAJ,OAAO,CAACC,GAAR,CAAYI,QAAZ;QACAd,QAAQ,CAACc,QAAD,CAAR,CACGI,IADH,CACSC,GAAD,IAAS;UACbN,MAAM,CAAC,UAAD,EAAaM,GAAG,CAACC,IAAjB,CAAN,CADa,CAEb;;UACAnB,MAAM,CAACoB,OAAP,CAAe,OAAf;UACAL,OAAO;QACR,CANH,EAOGM,KAPH,CAOUC,GAAD,IAAS;UACdN,MAAM,CAACM,GAAD,CAAN;QACD,CATH;MAUD,CAbM,CAAP;IAcD,CAhBM;;IAiBPC,MAAM,CAAE;MAAEX;IAAF,CAAF,EAAc;MAClBJ,OAAO,CAACC,GAAR,CAAY,UAAZ;MACAG,MAAM,CAAC,UAAD,EAAa,EAAb,CAAN;MACAR,YAAY,CAACoB,KAAb;MACAxB,MAAM,CAACoB,OAAP,CAAe,GAAf;IACD;;EAtBM;AAZI,CAAf"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withKeys as _withKeys, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, withModifiers as _withModifiers, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d9b7b550\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"page-title\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", null, \"添加采购\"), /*#__PURE__*/_createElementVNode(\"hr\", {\n  style: {\n    \"width\": \"50%\",\n    \"text-align\": \"left\",\n    \"margin-left\": \"0\"\n  }\n})], -1\n/* HOISTED */\n));\n\nconst _hoisted_2 = {\n  class: \"list-form\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"     \");\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"     \");\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"     \");\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"     \");\n\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"删除\");\n\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"提交\");\n\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"新增商品\");\n\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"重置\");\n\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"page-title\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", null, \"采购列表\"), /*#__PURE__*/_createElementVNode(\"hr\", {\n  style: {\n    \"width\": \"50%\",\n    \"text-align\": \"left\",\n    \"margin-left\": \"0\"\n  }\n})], -1\n/* HOISTED */\n));\n\nconst _hoisted_15 = {\n  class: \"items-container\"\n};\nconst _hoisted_16 = {\n  key: 1\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\"Detail \");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\");\n\n  const _component_el_col = _resolveComponent(\"el-col\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n  const _component_el_option = _resolveComponent(\"el-option\");\n\n  const _component_el_select = _resolveComponent(\"el-select\");\n\n  const _component_el_table = _resolveComponent(\"el-table\");\n\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_form, {\n    model: $setup.purchaseForm,\n    ref: \"form\",\n    \"label-width\": \"100px\",\n    rules: $setup.rules\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      prop: \"note\",\n      label: \"采购抬头\",\n      onKeyup: _cache[1] || (_cache[1] = _withKeys($event => $setup.focusOnNextItem('deposit'), [\"enter\"]))\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.purchaseForm.note,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.purchaseForm.note = $event),\n        class: \"item-input\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      prop: \"deposit\",\n      label: \"采购订金\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.purchaseForm.deposit,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.purchaseForm.deposit = $event),\n        class: \"item-input\",\n        onKeyup: _cache[3] || (_cache[3] = _withKeys($event => $setup.focusOnNextItem('bt'), [\"enter\"])),\n        id: \"deposit\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      label: \"采购日期\",\n      prop: \"buy_time\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_date_picker, {\n        type: \"date\",\n        placeholder: \"选择日期\",\n        modelValue: $setup.purchaseForm.buy_time,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.purchaseForm.buy_time = $event),\n        id: \"bt\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.purchaseForm.products, (product, index) => {\n      return _openBlock(), _createBlock(_component_el_form_item, {\n        label: '商品' + index,\n        key: product.key,\n        prop: '商品.' + index + '.product_name'\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_col, {\n          span: 3\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: product.product_name,\n            \"onUpdate:modelValue\": $event => product.product_name = $event,\n            placeholder: \"品名\",\n            style: {\n              \"width\": \"100%\"\n            }\n          }, null, 8\n          /* PROPS */\n          , [\"modelValue\", \"onUpdate:modelValue\"])]),\n          _: 2\n          /* DYNAMIC */\n\n        }, 1024\n        /* DYNAMIC_SLOTS */\n        ), _hoisted_3, _createVNode(_component_el_col, {\n          span: 3\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: product.product_version,\n            \"onUpdate:modelValue\": $event => product.product_version = $event,\n            placeholder: \"型号\",\n            style: {\n              \"width\": \"100%\"\n            }\n          }, null, 8\n          /* PROPS */\n          , [\"modelValue\", \"onUpdate:modelValue\"])]),\n          _: 2\n          /* DYNAMIC */\n\n        }, 1024\n        /* DYNAMIC_SLOTS */\n        ), _hoisted_4, _createVNode(_component_el_col, {\n          span: 3\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: product.quantity,\n            \"onUpdate:modelValue\": $event => product.quantity = $event,\n            placeholder: \"数量\",\n            style: {\n              \"width\": \"100%\"\n            }\n          }, null, 8\n          /* PROPS */\n          , [\"modelValue\", \"onUpdate:modelValue\"])]),\n          _: 2\n          /* DYNAMIC */\n\n        }, 1024\n        /* DYNAMIC_SLOTS */\n        ), _hoisted_5, _createVNode(_component_el_col, {\n          span: 3\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: product.price,\n            \"onUpdate:modelValue\": $event => product.price = $event,\n            placeholder: \"单价\",\n            style: {\n              \"width\": \"100%\"\n            }\n          }, null, 8\n          /* PROPS */\n          , [\"modelValue\", \"onUpdate:modelValue\"])]),\n          _: 2\n          /* DYNAMIC */\n\n        }, 1024\n        /* DYNAMIC_SLOTS */\n        ), _hoisted_6, _createVNode(_component_el_button, {\n          onClick: _withModifiers($event => $setup.removeProduct(product), [\"prevent\"])\n        }, {\n          default: _withCtx(() => [_hoisted_7]),\n          _: 2\n          /* DYNAMIC */\n\n        }, 1032\n        /* PROPS, DYNAMIC_SLOTS */\n        , [\"onClick\"])]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"label\", \"prop\"]);\n    }), 128\n    /* KEYED_FRAGMENT */\n    )), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $setup.addbuy,\n        class: \"item-button\"\n      }, {\n        default: _withCtx(() => [_hoisted_8]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_button, {\n        onClick: $setup.addProduct,\n        class: \"item-button\"\n      }, {\n        default: _withCtx(() => [_hoisted_9]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_button, {\n        onClick: $setup.resetPurchaseForm,\n        class: \"item-button\"\n      }, {\n        default: _withCtx(() => [_hoisted_10]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"model\", \"rules\"])]), _hoisted_11, _hoisted_12, _hoisted_13, _hoisted_14, _createElementVNode(\"div\", _hoisted_15, [_createVNode(_component_el_table, {\n    data: $setup.buysData,\n    style: {\n      \"width\": \"100%\"\n    },\n    \"table-layout:\": \"\",\n    auto: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"note\",\n      label: \"采购抬头\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"deposit\",\n      label: \"采购订金\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"buy_time\",\n      label: \"采购日期\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"ship-time\",\n      label: \"发运时间\"\n    }, {\n      default: _withCtx(scope => [!scope.row.ship_time ? (_openBlock(), _createBlock(_component_el_date_picker, {\n        key: 0,\n        modelValue: $setup.shiptimeValue[scope.row.buyId],\n        \"onUpdate:modelValue\": $event => $setup.shiptimeValue[scope.row.buyId] = $event,\n        onChange: $event => $setup.handleUpdateShipTime(scope.row.buyId),\n        type: \"date\",\n        placeholder: \"选择日期\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\", \"onUpdate:modelValue\", \"onChange\"])) : _createCommentVNode(\"v-if\", true), scope.row.ship_time ? (_openBlock(), _createElementBlock(\"p\", _hoisted_16, _toDisplayString(scope.row.ship_time), 1\n      /* TEXT */\n      )) : _createCommentVNode(\"v-if\", true)]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_table_column, {\n      label: \"商品列表\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_button, {\n        type: \"text\",\n        size: \"small\",\n        onClick: $event => $setup.handleDetail(row)\n      }, {\n        default: _withCtx(() => [_hoisted_17]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_table_column, {\n      fixed: \"right\",\n      label: \"操作\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_select, {\n        modelValue: $setup.buysData[row.buyId],\n        \"onUpdate:modelValue\": $event => $setup.buysData[row.buyId] = $event,\n        class: \"m-2\",\n        placeholder: \"Select\",\n        size: \"small\",\n        onChange: $event => $setup.handleDelete(row)\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_option, {\n          label: \"删除\",\n          value: \"0\"\n        })]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"modelValue\", \"onUpdate:modelValue\", \"onChange\"])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"data\"]), _createVNode(_component_el_dialog, {\n    modelValue: $setup.showDialog,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.showDialog = $event),\n    title: \"商品列表\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table, {\n      data: $setup.dialogData,\n      style: {\n        \"width\": \"100%\"\n      },\n      \"table-layout:\": \"\",\n      auto: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"product_name\",\n        label: \"品名\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"product_version\",\n        label: \"型号\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"quantity\",\n        label: \"数量\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"price\",\n        label: \"单价\"\n      })]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"data\"])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"modelValue\"])])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["_createElementVNode","class","style","_hoisted_1","_createVNode","_component_el_form","model","$setup","ref","rules","_component_el_form_item","prop","label","onKeyup","_component_el_input","note","$event","deposit","id","_component_el_date_picker","type","placeholder","buy_time","_createElementBlock","_Fragment","_renderList","products","product","index","_createBlock","key","_component_el_col","span","product_name","product_version","quantity","price","_component_el_button","onClick","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_component_el_table","data","auto","_component_el_table_column","default","scope","row","ship_time","buyId","onChange","_hoisted_16","_toDisplayString","size","fixed","_component_el_select","_component_el_option","value","_component_el_dialog","title"],"sourceRoot":"","sources":["/Users/alzhong/Personal/Projects/FamilyCareInventory/frontend/src/views/MainView/PurchaseView/PurchaseView.vue"],"sourcesContent":["<template>\n  <div class=\"page-title\">\n    <h1>添加采购</h1>\n    <hr style=\"width:50%;text-align:left;margin-left:0\">\n  </div>\n  <div class=\"list-form\">\n    <el-form :model=\"purchaseForm\" ref=\"form\" label-width=\"100px\" :rules=\"rules\">\n      <el-form-item prop=\"note\" label=\"采购抬头\" @keyup.enter=\"focusOnNextItem('deposit')\">\n        <el-input v-model=\"purchaseForm.note\" class=\"item-input\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"deposit\" label=\"采购订金\">\n        <el-input v-model=\"purchaseForm.deposit\" class=\"item-input\" @keyup.enter=\"focusOnNextItem('bt')\" id=\"deposit\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"采购日期\" prop=\"buy_time\">\n      <el-date-picker\n          type=\"date\" placeholder=\"选择日期\" v-model=\"purchaseForm.buy_time\" id=\"bt\">\n      </el-date-picker>\n      </el-form-item>\n      <el-form-item v-for=\"(product, index) in purchaseForm.products\"\n                    :label=\"'商品' + index\"\n                    :key=\"product.key\"\n                    :prop=\"'商品.' + index + '.product_name'\">\n        <el-col :span=\"3\">\n        <el-input v-model=\"product.product_name\" placeholder=\"品名\" style=\"width: 100%;\"></el-input>\n        </el-col>\n        &nbsp;&nbsp;&nbsp;\n          <el-col :span=\"3\">\n          <el-input v-model=\"product.product_version\" placeholder=\"型号\" style=\"width: 100%;\"></el-input>\n          </el-col>\n        &nbsp;&nbsp;&nbsp;\n        <el-col :span=\"3\">\n          <el-input v-model=\"product.quantity\" placeholder=\"数量\" style=\"width: 100%;\"></el-input>\n        </el-col>\n        &nbsp;&nbsp;&nbsp;\n        <el-col :span=\"3\">\n          <el-input v-model=\"product.price\" placeholder=\"单价\" style=\"width: 100%;\"></el-input>\n        </el-col>\n        &nbsp;&nbsp;&nbsp;\n        <el-button @click.prevent=\"removeProduct(product)\">删除</el-button>\n        </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"addbuy\" class=\"item-button\">提交</el-button>\n        <el-button @click=\"addProduct\" class=\"item-button\">新增商品</el-button>\n        <el-button @click=\"resetPurchaseForm\" class=\"item-button\">重置</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n  <br/>\n  <br/>\n  <br/>\n  <div class=\"page-title\">\n    <h1>采购列表</h1>\n    <hr style=\"width:50%;text-align:left;margin-left:0\">\n  </div>\n\n  <div class=\"items-container\">\n    <el-table :data=\"buysData\" style=\"width: 100%\" table-layout: auto>\n      <el-table-column prop=\"note\" label=\"采购抬头\"/>\n      <el-table-column prop=\"deposit\" label=\"采购订金\"/>\n      <el-table-column prop=\"buy_time\" label=\"采购日期\"/>\n      <el-table-column prop=\"ship-time\" label=\"发运时间\">\n        <template #default=\"scope\">\n        <el-date-picker v-model=\"shiptimeValue[scope.row.buyId]\" @change=\"handleUpdateShipTime(scope.row.buyId)\"\n            type=\"date\" placeholder=\"选择日期\" v-if=\"!scope.row.ship_time\">\n        </el-date-picker>\n          <p v-if=\"scope.row.ship_time\">{{ scope.row.ship_time }}</p>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"商品列表\">\n        <template #default=\"{ row }\">\n          <el-button type=\"text\" size=\"small\" @click=\"handleDetail(row)\"\n          >Detail\n          </el-button\n          >\n        </template>\n      </el-table-column>\n      <el-table-column fixed=\"right\" label=\"操作\">\n        <template #default=\"{ row }\">\n      <el-select v-model=\"buysData[row.buyId]\" class=\"m-2\" placeholder=\"Select\" size=\"small\"\n                 @change=\"handleDelete(row)\">\n        <el-option label=\"删除\" value=0></el-option>\n      </el-select>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog\n        v-model=\"showDialog\"\n        title=\"商品列表\"\n    >\n      <el-table :data=\"dialogData\" style=\"width: 100%\" table-layout: auto>\n        <el-table-column prop=\"product_name\" label=\"品名\"/>\n        <el-table-column prop=\"product_version\" label=\"型号\"/>\n        <el-table-column prop=\"quantity\" label=\"数量\"/>\n        <el-table-column prop=\"price\" label=\"单价\"/>\n      </el-table>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport {onMounted, ref} from \"vue\";\nimport { addBuy } from '@/api/addBuy'\nimport {myBuys} from \"@/api/myBuy\"\nimport {buyDetail} from \"@/api/buyDetail\";\nimport {deleteBuy} from \"@/api/deleteBuy\"\nimport {updateShipTime} from \"@/api/updateShipTime\"\n\nconst rules = ref({\n  note: [\n    {\n      required: true,\n      message: '请输入采购抬头',\n      trigger: 'blur'\n    }\n  ],\n  deposit: [\n    {\n      required: true,\n      message: '请输入采购订金',\n      trigger: 'blur'\n    }\n  ],\n  buy_time: [\n    {\n      required: true,\n      message: '请输入采购日期',\n      trigger: 'blur'\n    }\n  ]\n})\n\nonMounted(async () => {\n  const y = await myBuys(localStorage.getItem('token'))\n  buysData.value = y\n})\n\nconst purchaseForm = ref({\n  products: [{\n    product_name: '',\n    product_version: '',\n    quantity: '',\n    price: ''\n  }],\n  note: '',\n  deposit: '',\n  buy_time: ''\n})\n\nconst addbuy = async () => {\n  addBuy(purchaseForm.value, localStorage.getItem('token')).then(() => {\n    ElMessageBox.alert('提交成功！', {\n      confirmButtonText: 'OK',\n      callback: () => {\n        setTimeout(initBuyData, 1)\n        setTimeout(resetPurchaseForm, 1)\n        ElMessage({\n          type: 'info',\n          message: '已更新列表'\n        })\n      }\n    })\n  }).catch((err) => {\n    alert(err)\n  })\n}\n\nconst addProduct = async() =>{\n  purchaseForm.value.products.push({\n    product_name: '',\n    product_version: '',\n    quantity: '',\n    price: '',\n    key: Date.now()\n  })}\n\nconst removeProduct = (product) => {\n  var index = purchaseForm.value.products.indexOf(product)\n  if (index !== -1) {\n    purchaseForm.value.products.splice(index, 1)\n  }\n}\n\nconst resetPurchaseForm = async() =>{\n  purchaseForm.value = {\n    products: [{\n      product_name: '',\n      product_version: '',\n      quantity: '',\n      price: ''\n    }],\n    note: '',\n    deposit: '',\n    buy_time: ''\n  }\n}\n\nconst buysData = ref([])\nconst showDialog = ref(false)\nconst dialogData = ref([])\nconst handleDetail = async (row) => {\n  // eslint-disable-next-line\n  const x = await buyDetail(row.buyId, localStorage.getItem('token'))\n  showDialog.value = true\n  dialogData.value = x\n}\nconst initBuyData = async () => {\n  buysData.value = []\n  buysData.value = await myBuys(localStorage.getItem('token'))\n}\nconst handleDelete = async (row) => {\n  deleteBuy({\n    token: localStorage.getItem('token'),\n    buyId: row.buyId,\n  })\n  ElMessage({\n    type: 'info',\n    message: '已删除'\n  })\n  setTimeout(initBuyData, 1)\n}\nconst shiptimeValue = ref([])\nconst handleUpdateShipTime = async (row) => {\n  const body = {\n    token: localStorage.getItem('token'),\n    ship_time: shiptimeValue.value[row],\n    buyId: row\n  }\n  updateShipTime(body)\n  ElMessage({\n    type: 'info',\n    message: 'rated, reload data'\n  })\n  setTimeout(initBuyData, 1)\n  shiptimeValue.value = []\n}\n\nconst focusOnNextItem = (nextItemId) => {\n  var nextItem = document.getElementById(nextItemId)\n  nextItem.focus()\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.list-form {\n  margin-left: 350px;\n}\n\n.page-title {\n  font-size: 20px;\n  text-align: left;\n  margin-left: 300px;\n  margin-bottom: 20px;\n}\n\n.item-input {\n  width: 400px;\n}\n\n.item-button {\n  margin-left: 10px;\n  margin-top: 20px;\n}\n\n.items-container {\n  margin-left: 300px;\n  width: 1000px;\n}\n\n.page-title {\n  font-size: 20px;\n  text-align: left;\n  margin-left: 300px;\n  margin-bottom: 20px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}
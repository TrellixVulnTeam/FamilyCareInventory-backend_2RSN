{"ast":null,"code":"import { onMounted, ref } from 'vue';\nimport { useStore } from 'vuex';\nimport { myCosts } from '@/api/myCost';\nimport { deleteCost } from \"@/api/deleteCost\";\nimport { addCost } from \"@/api/addCost\"; // eslint-disable-next-line\n\nimport { ElMessage, ElMessageBox } from 'element-plus';\nexport default {\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const form = ref();\n    const blankForm = {\n      product_name: '',\n      product_version: '',\n      inventory: ''\n    };\n    form.value = blankForm;\n\n    const initCostData = async () => {\n      costsData.value = [];\n      costsData.value = await myCosts(localStorage.getItem('token'));\n    }; // listItem\n    // eslint-disable-next-line\n\n\n    const store = useStore();\n    const costsData = ref([]);\n    onMounted(async () => {\n      const y = await myCosts(localStorage.getItem('token'));\n      costsData.value = y;\n    });\n\n    const handleDelete = async row => {\n      console.log(row);\n      deleteCost({\n        token: localStorage.getItem('token'),\n        costId: row.costId\n      });\n      ElMessage({\n        type: 'info',\n        message: '已删除'\n      });\n      setTimeout(initCostData, 1);\n    };\n\n    const __returned__ = {\n      form,\n      blankForm,\n      initCostData,\n      store,\n      costsData,\n      handleDelete,\n      onMounted,\n      ref,\n      useStore,\n      myCosts,\n      deleteCost,\n      addCost,\n      ElMessage,\n      ElMessageBox\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AAuDA,SAASA,SAAT,EAAoBC,GAApB,QAA+B,KAA/B;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,OAAT,QAAwB,cAAxB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,OAAR,QAAsB,eAAtB,C,CACA;;AACA,SAASC,SAAT,EAAoBC,YAApB,QAAwC,cAAxC;;;;;;IAEA,MAAMC,IAAI,GAAGP,GAAG,EAAhB;IACA,MAAMQ,SAAS,GAAG;MAChBC,YAAY,EAAE,EADE;MAEhBC,eAAe,EAAE,EAFD;MAGhBC,SAAS,EAAE;IAHK,CAAlB;IAKAJ,IAAI,CAACK,KAAL,GAAaJ,SAAb;;IACA,MAAMK,YAAY,GAAG,YAAY;MAC/BC,SAAS,CAACF,KAAV,GAAkB,EAAlB;MACAE,SAAS,CAACF,KAAV,GAAkB,MAAMV,OAAO,CAACa,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAA/B;IACD,CAHD,EAKA;IACA;;;IACA,MAAMC,KAAK,GAAGhB,QAAQ,EAAtB;IACA,MAAMa,SAAS,GAAGd,GAAG,CAAC,EAAD,CAArB;IACAD,SAAS,CAAC,YAAY;MACpB,MAAMmB,CAAC,GAAG,MAAMhB,OAAO,CAACa,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAAvB;MACAF,SAAS,CAACF,KAAV,GAAkBM,CAAlB;IACD,CAHQ,CAAT;;IAKA,MAAMC,YAAY,GAAG,MAAOC,GAAP,IAAe;MAClCC,OAAO,CAACC,GAAR,CAAYF,GAAZ;MACAjB,UAAU,CAAC;QACToB,KAAK,EAAER,YAAY,CAACC,OAAb,CAAqB,OAArB,CADE;QAETQ,MAAM,EAAEJ,GAAG,CAACI;MAFH,CAAD,CAAV;MAIAnB,SAAS,CAAC;QACRoB,IAAI,EAAE,MADE;QAERC,OAAO,EAAE;MAFD,CAAD,CAAT;MAIAC,UAAU,CAACd,YAAD,EAAe,CAAf,CAAV;IACD,CAXD","names":["onMounted","ref","useStore","myCosts","deleteCost","addCost","ElMessage","ElMessageBox","form","blankForm","product_name","product_version","inventory","value","initCostData","costsData","localStorage","getItem","store","y","handleDelete","row","console","log","token","costId","type","message","setTimeout"],"sources":["/Users/alzhong/Personal/Projects/FamilyCareInventory/frontend/src/views/MainView/CostView/CostView.vue"],"sourcesContent":["<template>\n  <div class=\"page-title\">\n    <h1>添加费用</h1>\n    <hr style=\"width:50%;text-align:left;margin-left:0\">\n  </div>\n  <div class=\"list-form\">\n    <el-form :model=\"form\" label-width=\"100px\">\n      <el-form-item label=\"费用名称\" required>\n        <el-input class=\"item-input\" size=\"large\" v-model=\"form.product_name\"/>\n      </el-form-item>\n      <el-form-item label=\"费用金额\" required>\n        <el-input class=\"item-input\" size=\"large\" v-model=\"form.product_version\"/>\n      </el-form-item>\n      <el-form-item label=\"日期\" required>\n        <el-date-picker\n            type=\"date\" placeholder=\"选择日期\" v-model=\"form.buy_time\">\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"备注\">\n        <el-input class=\"item-input\" size=\"large\" v-model=\"form.inventory\" type=\"textarea\"/>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"addbuy\" class=\"item-button\">提交</el-button>\n        <el-button @click=\"addProduct\" class=\"item-button\">新增商品</el-button>\n        <el-button @click=\"resetForm\" class=\"item-button\">重置</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n  <br/>\n  <br/>\n  <br/>\n  <div class=\"page-title\">\n    <h1>费用明细</h1>\n    <hr style=\"width:50%;text-align:left;margin-left:0\">\n  </div>\n\n  <div class=\"items-container\">\n    <el-table :data=\"itemsData\" style=\"width: 100%\" table-layout: auto>\n      <el-table-column prop=\"product_name\" label=\"费用名称\"/>\n      <el-table-column prop=\"product_version\" label=\"费用金额\"/>\n      <el-table-column prop=\"inventory\" label=\"日期\"/>\n      <el-table-column prop=\"created_time\" label=\"备注\"/>\n      <el-table-column fixed=\"right\" label=\"操作\">\n        <template #default=\"{ row }\">\n          <el-select v-model=\"itemsData[row.productId]\" class=\"m-2\" placeholder=\"Select\" size=\"small\"\n                     @change=\"handleDelete(row)\">\n            <el-option label=\"删除\" value=0></el-option>\n          </el-select>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { myCosts } from '@/api/myCost'\nimport {deleteCost} from \"@/api/deleteCost\";\nimport {addCost} from \"@/api/addCost\";\n// eslint-disable-next-line\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\nconst form = ref()\nconst blankForm = {\n  product_name: '',\n  product_version: '',\n  inventory: ''\n}\nform.value = blankForm\nconst initCostData = async () => {\n  costsData.value = []\n  costsData.value = await myCosts(localStorage.getItem('token'))\n}\n\n// listItem\n// eslint-disable-next-line\nconst store = useStore()\nconst costsData = ref([])\nonMounted(async () => {\n  const y = await myCosts(localStorage.getItem('token'))\n  costsData.value = y\n})\n\nconst handleDelete = async (row) => {\n  console.log(row)\n  deleteCost({\n    token: localStorage.getItem('token'),\n    costId: row.costId,\n  })\n  ElMessage({\n    type: 'info',\n    message: '已删除'\n  })\n  setTimeout(initCostData, 1)\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.list-form {\n  margin-left: 350px;\n}\n\n.item-input {\n  width: 400px;\n}\n\n.item-button {\n  margin-left: 10px;\n  margin-top: 20px;\n}\n\n.items-container {\n  margin-left: 300px;\n  width: 1000px;\n}\n\n.page-title {\n  font-size: 20px;\n  text-align: left;\n  margin-left: 300px;\n  margin-bottom: 20px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { login as loginApi } from '@/api/login';\nimport { register as registerApi } from '@/api/register';\nimport { listItem as listItemAPI } from '@/api/listItem';\nimport router from '@/router'; // eslint-disable-next-line\n\nimport { ElMessageBox } from 'element-plus'; // import { setTokenTime } from '@/utils/auth'\n\nexport default {\n  namespaced: true,\n  state: () => ({\n    token: localStorage.getItem('token') || ''\n  }),\n  mutations: {\n    setToken(state, token) {\n      console.log('token is' + token);\n      state.token = token;\n      localStorage.setItem('token', token);\n    }\n\n  },\n  actions: {\n    login({\n      commit\n    }, userInfo) {\n      return new Promise((resolve, reject) => {\n        console.log(commit);\n        console.log(userInfo);\n        loginApi(userInfo).then(res => {\n          console.log(res);\n          commit('setToken', res); // setTokenTime()\n\n          router.replace('/Main');\n          resolve();\n        }).catch(err => {\n          reject(err);\n        });\n      });\n    },\n\n    register({\n      commit\n    }, userInfo) {\n      return new Promise((resolve, reject) => {\n        registerApi(userInfo).then(res => {\n          console.log(res);\n          commit('setToken', res); // setTokenTime()\n\n          router.replace('/Main');\n          resolve();\n        }).catch(err => {\n          reject(err);\n        });\n      });\n    },\n\n    logout({\n      commit\n    }) {\n      console.log('log out!');\n      commit('setToken', '');\n      localStorage.clear();\n      router.replace('/');\n    },\n\n    listItem({\n      commit\n    }, itemInfo) {\n      return new Promise((resolve, reject) => {\n        // console.log(commit)\n        console.log(itemInfo);\n        listItemAPI(itemInfo).then(res => {\n          console.log('get returned' + res);\n          resolve();\n        }).catch(err => {\n          reject(err);\n        });\n      });\n    }\n\n  }\n};","map":{"version":3,"names":["login","loginApi","register","registerApi","listItem","listItemAPI","router","ElMessageBox","namespaced","state","token","localStorage","getItem","mutations","setToken","console","log","setItem","actions","commit","userInfo","Promise","resolve","reject","then","res","replace","catch","err","logout","clear","itemInfo"],"sources":["/Users/alzhong/Personal/Projects/FamilyCareInventory/frontend/src/store/modules/app.js"],"sourcesContent":["import { login as loginApi } from '@/api/login'\r\nimport { register as registerApi } from '@/api/register'\r\nimport { listItem as listItemAPI } from '@/api/listItem'\r\nimport router from '@/router'\r\n// eslint-disable-next-line\r\nimport { ElMessageBox } from 'element-plus'\r\n// import { setTokenTime } from '@/utils/auth'\r\nexport default {\r\n  namespaced: true,\r\n  state: () => ({\r\n    token: localStorage.getItem('token') || ''\r\n  }),\r\n  mutations: {\r\n    setToken (state, token) {\r\n      console.log('token is' + token)\r\n      state.token = token\r\n      localStorage.setItem('token', token)\r\n    }\r\n  },\r\n  actions: {\r\n    login ({ commit }, userInfo) {\r\n      return new Promise((resolve, reject) => {\r\n        console.log(commit)\r\n        console.log(userInfo)\r\n        loginApi(userInfo)\r\n          .then((res) => {\r\n            console.log(res)\r\n            commit('setToken', res)\r\n            // setTokenTime()\r\n            router.replace('/Main')\r\n            resolve()\r\n          })\r\n          .catch((err) => {\r\n            reject(err)\r\n          })\r\n      })\r\n    },\r\n    register ({ commit }, userInfo) {\r\n      return new Promise((resolve, reject) => {\r\n        registerApi(userInfo)\r\n          .then((res) => {\r\n            console.log(res)\r\n            commit('setToken', res)\r\n            // setTokenTime()\r\n            router.replace('/Main')\r\n            resolve()\r\n          })\r\n          .catch((err) => {\r\n            reject(err)\r\n          })\r\n      })\r\n    },\r\n    logout ({ commit }) {\r\n      console.log('log out!')\r\n      commit('setToken', '')\r\n      localStorage.clear()\r\n      router.replace('/')\r\n    },\r\n    listItem ({ commit }, itemInfo) {\r\n      return new Promise((resolve, reject) => {\r\n        // console.log(commit)\r\n        console.log(itemInfo)\r\n        listItemAPI(itemInfo)\r\n          .then((res) => {\r\n            console.log('get returned' + res)\r\n            resolve()\r\n          })\r\n          .catch((err) => {\r\n            reject(err)\r\n          })\r\n      })\r\n    }\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,KAAK,IAAIC,QAAlB,QAAkC,aAAlC;AACA,SAASC,QAAQ,IAAIC,WAArB,QAAwC,gBAAxC;AACA,SAASC,QAAQ,IAAIC,WAArB,QAAwC,gBAAxC;AACA,OAAOC,MAAP,MAAmB,UAAnB,C,CACA;;AACA,SAASC,YAAT,QAA6B,cAA7B,C,CACA;;AACA,eAAe;EACbC,UAAU,EAAE,IADC;EAEbC,KAAK,EAAE,OAAO;IACZC,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC;EAD5B,CAAP,CAFM;EAKbC,SAAS,EAAE;IACTC,QAAQ,CAAEL,KAAF,EAASC,KAAT,EAAgB;MACtBK,OAAO,CAACC,GAAR,CAAY,aAAaN,KAAzB;MACAD,KAAK,CAACC,KAAN,GAAcA,KAAd;MACAC,YAAY,CAACM,OAAb,CAAqB,OAArB,EAA8BP,KAA9B;IACD;;EALQ,CALE;EAYbQ,OAAO,EAAE;IACPlB,KAAK,CAAE;MAAEmB;IAAF,CAAF,EAAcC,QAAd,EAAwB;MAC3B,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;QACtCR,OAAO,CAACC,GAAR,CAAYG,MAAZ;QACAJ,OAAO,CAACC,GAAR,CAAYI,QAAZ;QACAnB,QAAQ,CAACmB,QAAD,CAAR,CACGI,IADH,CACSC,GAAD,IAAS;UACbV,OAAO,CAACC,GAAR,CAAYS,GAAZ;UACAN,MAAM,CAAC,UAAD,EAAaM,GAAb,CAAN,CAFa,CAGb;;UACAnB,MAAM,CAACoB,OAAP,CAAe,OAAf;UACAJ,OAAO;QACR,CAPH,EAQGK,KARH,CAQUC,GAAD,IAAS;UACdL,MAAM,CAACK,GAAD,CAAN;QACD,CAVH;MAWD,CAdM,CAAP;IAeD,CAjBM;;IAkBP1B,QAAQ,CAAE;MAAEiB;IAAF,CAAF,EAAcC,QAAd,EAAwB;MAC9B,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;QACtCpB,WAAW,CAACiB,QAAD,CAAX,CACGI,IADH,CACSC,GAAD,IAAS;UACbV,OAAO,CAACC,GAAR,CAAYS,GAAZ;UACAN,MAAM,CAAC,UAAD,EAAaM,GAAb,CAAN,CAFa,CAGb;;UACAnB,MAAM,CAACoB,OAAP,CAAe,OAAf;UACAJ,OAAO;QACR,CAPH,EAQGK,KARH,CAQUC,GAAD,IAAS;UACdL,MAAM,CAACK,GAAD,CAAN;QACD,CAVH;MAWD,CAZM,CAAP;IAaD,CAhCM;;IAiCPC,MAAM,CAAE;MAAEV;IAAF,CAAF,EAAc;MAClBJ,OAAO,CAACC,GAAR,CAAY,UAAZ;MACAG,MAAM,CAAC,UAAD,EAAa,EAAb,CAAN;MACAR,YAAY,CAACmB,KAAb;MACAxB,MAAM,CAACoB,OAAP,CAAe,GAAf;IACD,CAtCM;;IAuCPtB,QAAQ,CAAE;MAAEe;IAAF,CAAF,EAAcY,QAAd,EAAwB;MAC9B,OAAO,IAAIV,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;QACtC;QACAR,OAAO,CAACC,GAAR,CAAYe,QAAZ;QACA1B,WAAW,CAAC0B,QAAD,CAAX,CACGP,IADH,CACSC,GAAD,IAAS;UACbV,OAAO,CAACC,GAAR,CAAY,iBAAiBS,GAA7B;UACAH,OAAO;QACR,CAJH,EAKGK,KALH,CAKUC,GAAD,IAAS;UACdL,MAAM,CAACK,GAAD,CAAN;QACD,CAPH;MAQD,CAXM,CAAP;IAYD;;EApDM;AAZI,CAAf"},"metadata":{},"sourceType":"module"}
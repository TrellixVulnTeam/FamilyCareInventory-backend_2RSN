{"ast":null,"code":"import { useStore } from 'vuex';\nimport { addBuy } from '@/api/addBuy'; // eslint-disable-next-line\n\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { ref } from \"vue\";\nexport default {\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const form = ref();\n    const blankForm = {\n      product_name: '',\n      product_version: '',\n      inventory: ''\n    };\n    form.value = blankForm;\n\n    const addbuy = async () => {\n      // console.log(form)\n      // store.dispatch('app/listItem', form.value)\n      addBuy(form.value, localStorage.getItem('token')).then(() => {\n        // console.log('get returned' + res)\n        ElMessageBox.alert('提交成功！', {\n          confirmButtonText: 'OK',\n          callback: () => {\n            form.value = {\n              product_name: '',\n              product_version: '',\n              inventory: ''\n            };\n            ElMessage({\n              type: 'info',\n              message: '已更新列表'\n            });\n          }\n        });\n      }).catch(err => {\n        alert(err);\n      });\n    }; // listItem\n    // eslint-disable-next-line\n\n\n    const store = useStore();\n    const itemsData = ref([]);\n    const __returned__ = {\n      form,\n      blankForm,\n      addbuy,\n      store,\n      itemsData,\n      useStore,\n      addBuy,\n      ElMessage,\n      ElMessageBox,\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AA4DA,SAASA,QAAT,QAAyB,MAAzB;AACA,SAASC,MAAT,QAAuB,cAAvB,C,CACA;;AACA,SAASC,SAAT,EAAoBC,YAApB,QAAwC,cAAxC;AACA,SAAQC,GAAR,QAAkB,KAAlB;;;;;;IAEA,MAAMC,IAAI,GAAGD,GAAG,EAAhB;IACA,MAAME,SAAS,GAAG;MAChBC,YAAY,EAAE,EADE;MAEhBC,eAAe,EAAE,EAFD;MAGhBC,SAAS,EAAE;IAHK,CAAlB;IAKAJ,IAAI,CAACK,KAAL,GAAaJ,SAAb;;IACA,MAAMK,MAAM,GAAG,YAAY;MACzB;MACA;MACAV,MAAM,CAACI,IAAI,CAACK,KAAN,EAAaE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAb,CAAN,CAAkDC,IAAlD,CAAuD,MAAM;QAC3D;QACAX,YAAY,CAACY,KAAb,CAAmB,OAAnB,EAA4B;UAC1BC,iBAAiB,EAAE,IADO;UAE1BC,QAAQ,EAAE,MAAM;YACdZ,IAAI,CAACK,KAAL,GAAa;cACXH,YAAY,EAAE,EADH;cAEXC,eAAe,EAAE,EAFN;cAGXC,SAAS,EAAE;YAHA,CAAb;YAKAP,SAAS,CAAC;cACRgB,IAAI,EAAE,MADE;cAERC,OAAO,EAAE;YAFD,CAAD,CAAT;UAID;QAZyB,CAA5B;MAcD,CAhBD,EAgBGC,KAhBH,CAgBUC,GAAD,IAAS;QAChBN,KAAK,CAACM,GAAD,CAAL;MACD,CAlBD;IAmBD,CAtBD,EAwBA;IACA;;;IACA,MAAMC,KAAK,GAAGtB,QAAQ,EAAtB;IACA,MAAMuB,SAAS,GAAGnB,GAAG,CAAC,EAAD,CAArB","names":["useStore","addBuy","ElMessage","ElMessageBox","ref","form","blankForm","product_name","product_version","inventory","value","addbuy","localStorage","getItem","then","alert","confirmButtonText","callback","type","message","catch","err","store","itemsData"],"sources":["/Users/alzhong/Personal/Projects/FamilyCareInventory/frontend/src/views/MainView/PurchaseView/PurchaseView.vue"],"sourcesContent":["<template>\n  <div class=\"page-title\">\n    <h1>添加采购</h1>\n    <hr style=\"width:50%;text-align:left;margin-left:0\">\n  </div>\n  <div class=\"list-form\">\n    <el-form :model=\"form\" ref=\"form\" label-width=\"100px\">\n      <el-form-item prop=\"note\" label=\"采购抬头\">\n        <el-input v-model=\"form.note\" class=\"item-input\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"deposit\" label=\"采购订金\">\n        <el-input v-model=\"form.deposit\" class=\"item-input\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"采购日期\">\n      <el-date-picker\n          type=\"date\" placeholder=\"选择日期\" v-model=\"form.buy_time\"\n      >\n        <el-input v-model=\"form.note\" class=\"item-input\"></el-input>\n      </el-date-picker>\n      </el-form-item>\n      <el-form-item v-for=\"(domain, index) in form.domains\"\n                    :label=\"'商品' + index\"\n                    :key=\"domain.key\"\n                    :prop=\"'商品.' + index + '.value'\">\n        <el-input v-model=\"domain.value\"></el-input><el-button @click.prevent=\"removeDomain(domain)\">删除</el-button>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"addbuy\" class=\"item-button\">提交</el-button>\n        <el-button @click=\"addDomain\">新增域名</el-button>\n        <el-button @click=\"resetForm('dynamicValidateForm')\">重置</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n  <br/>\n  <br/>\n  <br/>\n  <div class=\"page-title\">\n    <h1>采购列表</h1>\n    <hr style=\"width:50%;text-align:left;margin-left:0\">\n  </div>\n\n  <div class=\"items-container\">\n    <el-table :data=\"itemsData\" style=\"width: 100%\" table-layout: auto>\n      <el-table-column prop=\"product_name\" label=\"品名\"/>\n      <el-table-column prop=\"product_version\" label=\"型号\"/>\n      <el-table-column prop=\"inventory\" label=\"库存量\"/>\n      <el-table-column prop=\"created_time\" label=\"创建时间\"/>\n      <el-table-column fixed=\"right\" label=\"操作\">\n        <template #default=\"{ row }\">\n          <el-select v-model=\"itemsData[row.productId]\" class=\"m-2\" placeholder=\"Select\" size=\"small\"\n                     @change=\"handleDelete(row)\">\n            <el-option label=\"删除\" value=0></el-option>\n          </el-select>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script setup>\nimport { useStore } from 'vuex'\nimport { addBuy } from '@/api/addBuy'\n// eslint-disable-next-line\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport {ref} from \"vue\";\n\nconst form = ref()\nconst blankForm = {\n  product_name: '',\n  product_version: '',\n  inventory: ''\n}\nform.value = blankForm\nconst addbuy = async () => {\n  // console.log(form)\n  // store.dispatch('app/listItem', form.value)\n  addBuy(form.value, localStorage.getItem('token')).then(() => {\n    // console.log('get returned' + res)\n    ElMessageBox.alert('提交成功！', {\n      confirmButtonText: 'OK',\n      callback: () => {\n        form.value = {\n          product_name: '',\n          product_version: '',\n          inventory: ''\n        }\n        ElMessage({\n          type: 'info',\n          message: '已更新列表'\n        })\n      }\n    })\n  }).catch((err) => {\n    alert(err)\n  })\n}\n\n// listItem\n// eslint-disable-next-line\nconst store = useStore()\nconst itemsData = ref([])\n\n</script>\n\n<style scoped lang=\"scss\">\n\n.list-form {\n  margin-left: 350px;\n}\n\n.page-title {\n  font-size: 20px;\n  text-align: left;\n  margin-left: 300px;\n  margin-bottom: 20px;\n}\n\n.item-input {\n  width: 400px;\n}\n\n.item-button {\n  margin-left: 10px;\n  margin-top: 20px;\n}\n\n.items-container {\n  margin-left: 300px;\n  width: 1000px;\n}\n\n.page-title {\n  font-size: 20px;\n  text-align: left;\n  margin-left: 300px;\n  margin-bottom: 20px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}
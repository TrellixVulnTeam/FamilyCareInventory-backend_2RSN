{"ast":null,"code":"import { computed, ref } from 'vue';\nimport { Search } from '@element-plus/icons-vue';\nimport { searchItems } from '@/api/searchItems';\nimport { itemDetail } from '@/api/itemDetail';\nimport { myItems } from '@/api/myItems';\nimport { addSwap } from '@/api/addSwap';\nimport router from '@/router';\nimport { ElMessage } from 'element-plus';\nimport { mainPage } from '@/api/main_page'; // eslint-disable-next-line no-unused-vars\n\nexport default {\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    /* eslint-disable */\n\n    const isButtonDisabled = ref(true);\n    const activeName = ref('keyword');\n    const outerVisible = ref(false);\n    const innerVisible = ref(false);\n    const thirdVisible = ref(false);\n    const myItemsData = ref([]);\n    const form = ref({\n      email: localStorage.getItem('token'),\n      keyword: '',\n      search_type: '',\n      postal_code: '',\n      distance: ''\n    });\n    const searchResult = ref([]);\n    const swapRequestData = {\n      proposed_itemID: '',\n      desired_itemID: ''\n    }; // eslint-disable-next-line no-unused-vars\n\n    const ableConfirm = computed(() => {\n      return swapRequestData.myItemID === '';\n    }); // eslint-disable-next-line no-unused-vars\n\n    const handleSearchTabChange = () => {\n      console.log('changed');\n      form.value = {\n        email: localStorage.getItem('token'),\n        keyword: '',\n        search_type: '',\n        postal_code: '',\n        distance: ''\n      };\n    };\n\n    const searchTitle = ref('');\n\n    const handleSearch = async () => {\n      // eslint-disable-next-line no-empty\n      switch (activeName.value) {\n        case 'keyword':\n          searchResult.value = await searchItems({\n            token: localStorage.getItem('token'),\n            search_type: 'key word',\n            key_word: form.value.keyword\n          });\n          console.log(searchResult);\n          searchTitle.value = 'keyword ' + '\"' + form.value.keyword + '\"';\n          outerVisible.value = true;\n          break;\n\n        case 'myZip':\n          searchResult.value = await searchItems({\n            token: localStorage.getItem('token'),\n            search_type: 'my postal code' // key_word: form.value.keyword\n\n          });\n          searchTitle.value = 'my postal code';\n          outerVisible.value = true;\n          break;\n\n        case 'nearDist':\n          searchResult.value = await searchItems({\n            token: localStorage.getItem('token'),\n            search_type: 'distance',\n            distance: form.value.distance\n          });\n          searchTitle.value = 'distance in ' + form.value.distance + ' miles';\n          outerVisible.value = true;\n          break;\n\n        case 'inZip':\n          searchResult.value = await searchItems({\n            token: localStorage.getItem('token'),\n            search_type: 'postal code',\n            postal_code: form.value.postal_code\n          });\n          searchTitle.value = 'postal code in ' + form.value.postal_code;\n          outerVisible.value = true;\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    const detailData = ref({});\n\n    const handleDetail = async row => {\n      const x = await itemDetail(row.itemID, localStorage.getItem('token'));\n      innerVisible.value = true;\n      console.log(x);\n      detailData.value.itemID = x.itemID;\n      detailData.value.title = x.title;\n      detailData.value.game_type = x.game_type;\n      detailData.value.v_platform = x.v_platform;\n      detailData.value.description = x.description;\n      detailData.value.condition = x.condition;\n      detailData.value.media = x.media;\n      detailData.value.c_platform = x.c_platform;\n      detailData.value.piece = x.piece;\n      detailData.value.nickname = x.nickname;\n      detailData.value.postal_code = x.postal_code;\n      detailData.value.state = x.state;\n      detailData.value.city = x.city;\n      detailData.value.rating = x.rating;\n      detailData.value.distance = x.distance; // setDistanceStyle()\n    };\n\n    const handleSwap = async itemID => {\n      const x = await mainPage(localStorage.getItem('token'));\n      console.log(x.ua_cnt);\n\n      if (x.ur_cnt > 2) {\n        ElMessage.error('You have more than 2 unrated swaps');\n        return;\n      }\n\n      swapRequestData.desired_itemID = itemID;\n      thirdVisible.value = true;\n      myItemsData.value = await myItems(localStorage.getItem('token'));\n    };\n\n    const handleCurrentChange = res => {\n      console.log(res);\n      swapRequestData.proposed_itemID = res.itemID;\n      console.log(swapRequestData);\n      console.log(ableConfirm);\n    };\n\n    const handleConfirmSwap = async () => {\n      // console.log()\n      // eslint-disable-next-line\n      if (swapRequestData.proposed_itemID !== '') {\n        const res = await addSwap(swapRequestData);\n        console.log(res);\n        thirdVisible.value = false;\n        innerVisible.value = false;\n        outerVisible.value = false;\n        ElMessage.info('You proposed 1 swap');\n        await router.push('/Main/MainPage');\n      } else {\n        ElMessage.error('Must select one Item to swap!!!');\n      }\n    }; // eslint-disable-next-line no-unused-vars\n\n\n    const setDistanceStyle = () => {\n      const distance = detailData.value.distance;\n      console.log('distance is : ' + distance);\n      let x = null;\n\n      if (distance === 0) {\n        x = 'white';\n      }\n\n      if (distance > 0 && distance <= 25.0) {\n        x = '#00ff00';\n      }\n\n      if (distance > 25.0 && distance <= 50) {\n        x = '#ffff00';\n      }\n\n      if (distance > 50.0 && distance <= 100.0) {\n        x = 'orange';\n      }\n\n      if (distance > 100.0) {\n        x = '#FF0000';\n      }\n\n      console.log('color is : ' + x);\n      return {\n        background: x\n      };\n    };\n\n    const setCellBG = ({\n      row,\n      column\n    }) => {\n      var reg = new RegExp(form.value.keyword, 'i');\n\n      if (activeName.value === 'keyword' && (reg.test(row.title) && column.property === 'title' || reg.test(row.description) && column.property === 'description')) {\n        return {\n          background: '#87CEFA'\n        };\n      }\n    };\n\n    const __returned__ = {\n      isButtonDisabled,\n      activeName,\n      outerVisible,\n      innerVisible,\n      thirdVisible,\n      myItemsData,\n      form,\n      searchResult,\n      swapRequestData,\n      ableConfirm,\n      handleSearchTabChange,\n      searchTitle,\n      handleSearch,\n      detailData,\n      handleDetail,\n      handleSwap,\n      handleCurrentChange,\n      handleConfirmSwap,\n      setDistanceStyle,\n      setCellBG,\n      computed,\n      ref,\n      Search,\n      searchItems,\n      itemDetail,\n      myItems,\n      addSwap,\n      router,\n      ElMessage,\n      mainPage\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AA+JA,SAASA,QAAT,EAAmBC,GAAnB,QAA8B,KAA9B;AACA,SAASC,MAAT,QAAuB,yBAAvB;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,eAAxB;AACA,SAASC,OAAT,QAAwB,eAAxB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,QAAT,QAAyB,iBAAzB,C,CACA;;;;;;;IAVA;;IAWA,MAAMC,gBAAgB,GAAGT,GAAG,CAAC,IAAD,CAA5B;IACA,MAAMU,UAAU,GAAGV,GAAG,CAAC,SAAD,CAAtB;IACA,MAAMW,YAAY,GAAGX,GAAG,CAAC,KAAD,CAAxB;IACA,MAAMY,YAAY,GAAGZ,GAAG,CAAC,KAAD,CAAxB;IACA,MAAMa,YAAY,GAAGb,GAAG,CAAC,KAAD,CAAxB;IACA,MAAMc,WAAW,GAAGd,GAAG,CAAC,EAAD,CAAvB;IACA,MAAMe,IAAI,GAAGf,GAAG,CAAC;MACfgB,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADQ;MAEfC,OAAO,EAAE,EAFM;MAGfC,WAAW,EAAE,EAHE;MAIfC,WAAW,EAAE,EAJE;MAKfC,QAAQ,EAAE;IALK,CAAD,CAAhB;IAOA,MAAMC,YAAY,GAAGvB,GAAG,CAAC,EAAD,CAAxB;IACA,MAAMwB,eAAe,GAAG;MACtBC,eAAe,EAAE,EADK;MAEtBC,cAAc,EAAE;IAFM,CAAxB,EAIA;;IACA,MAAMC,WAAW,GAAG5B,QAAQ,CAAC,MAAM;MACjC,OAAOyB,eAAe,CAACI,QAAhB,KAA6B,EAApC;IACD,CAF2B,CAA5B,EAGA;;IACA,MAAMC,qBAAqB,GAAG,MAAM;MAClCC,OAAO,CAACC,GAAR,CAAY,SAAZ;MACAhB,IAAI,CAACiB,KAAL,GAAa;QACXhB,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADI;QAEXC,OAAO,EAAE,EAFE;QAGXC,WAAW,EAAE,EAHF;QAIXC,WAAW,EAAE,EAJF;QAKXC,QAAQ,EAAE;MALC,CAAb;IAOD,CATD;;IAUA,MAAMW,WAAW,GAAGjC,GAAG,CAAC,EAAD,CAAvB;;IACA,MAAMkC,YAAY,GAAG,YAAY;MAC/B;MACA,QAAQxB,UAAU,CAACsB,KAAnB;QACE,KAAK,SAAL;UACET,YAAY,CAACS,KAAb,GAAqB,MAAM9B,WAAW,CAAC;YACrCiC,KAAK,EAAElB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAD8B;YAErCE,WAAW,EAAE,UAFwB;YAGrCgB,QAAQ,EAAErB,IAAI,CAACiB,KAAL,CAAWb;UAHgB,CAAD,CAAtC;UAKAW,OAAO,CAACC,GAAR,CAAYR,YAAZ;UACAU,WAAW,CAACD,KAAZ,GAAoB,aAAa,GAAb,GAAmBjB,IAAI,CAACiB,KAAL,CAAWb,OAA9B,GAAwC,GAA5D;UACAR,YAAY,CAACqB,KAAb,GAAqB,IAArB;UACA;;QACF,KAAK,OAAL;UACET,YAAY,CAACS,KAAb,GAAqB,MAAM9B,WAAW,CAAC;YACrCiC,KAAK,EAAElB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAD8B;YAErCE,WAAW,EAAE,gBAFwB,CAGrC;;UAHqC,CAAD,CAAtC;UAKAa,WAAW,CAACD,KAAZ,GAAoB,gBAApB;UACArB,YAAY,CAACqB,KAAb,GAAqB,IAArB;UACA;;QACF,KAAK,UAAL;UACET,YAAY,CAACS,KAAb,GAAqB,MAAM9B,WAAW,CAAC;YACrCiC,KAAK,EAAElB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAD8B;YAErCE,WAAW,EAAE,UAFwB;YAGrCE,QAAQ,EAAEP,IAAI,CAACiB,KAAL,CAAWV;UAHgB,CAAD,CAAtC;UAKAW,WAAW,CAACD,KAAZ,GAAoB,iBAAiBjB,IAAI,CAACiB,KAAL,CAAWV,QAA5B,GAAuC,QAA3D;UACAX,YAAY,CAACqB,KAAb,GAAqB,IAArB;UACA;;QACF,KAAK,OAAL;UACET,YAAY,CAACS,KAAb,GAAqB,MAAM9B,WAAW,CAAC;YACrCiC,KAAK,EAAElB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAD8B;YAErCE,WAAW,EAAE,aAFwB;YAGrCC,WAAW,EAAEN,IAAI,CAACiB,KAAL,CAAWX;UAHa,CAAD,CAAtC;UAKAY,WAAW,CAACD,KAAZ,GAAoB,oBAAoBjB,IAAI,CAACiB,KAAL,CAAWX,WAAnD;UACAV,YAAY,CAACqB,KAAb,GAAqB,IAArB;UACA;;QACF;UACE;MAvCJ;IAyCD,CA3CD;;IA4CA,MAAMK,UAAU,GAAGrC,GAAG,CAAC,EAAD,CAAtB;;IACA,MAAMsC,YAAY,GAAG,MAAOC,GAAP,IAAe;MAClC,MAAMC,CAAC,GAAG,MAAMrC,UAAU,CAACoC,GAAG,CAACE,MAAL,EAAaxB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAb,CAA1B;MACAN,YAAY,CAACoB,KAAb,GAAqB,IAArB;MACAF,OAAO,CAACC,GAAR,CAAYS,CAAZ;MACAH,UAAU,CAACL,KAAX,CAAiBS,MAAjB,GAA0BD,CAAC,CAACC,MAA5B;MACAJ,UAAU,CAACL,KAAX,CAAiBU,KAAjB,GAAyBF,CAAC,CAACE,KAA3B;MACAL,UAAU,CAACL,KAAX,CAAiBW,SAAjB,GAA6BH,CAAC,CAACG,SAA/B;MACAN,UAAU,CAACL,KAAX,CAAiBY,UAAjB,GAA8BJ,CAAC,CAACI,UAAhC;MACAP,UAAU,CAACL,KAAX,CAAiBa,WAAjB,GAA+BL,CAAC,CAACK,WAAjC;MACAR,UAAU,CAACL,KAAX,CAAiBc,SAAjB,GAA6BN,CAAC,CAACM,SAA/B;MACAT,UAAU,CAACL,KAAX,CAAiBe,KAAjB,GAAyBP,CAAC,CAACO,KAA3B;MACAV,UAAU,CAACL,KAAX,CAAiBgB,UAAjB,GAA8BR,CAAC,CAACQ,UAAhC;MACAX,UAAU,CAACL,KAAX,CAAiBiB,KAAjB,GAAyBT,CAAC,CAACS,KAA3B;MACAZ,UAAU,CAACL,KAAX,CAAiBkB,QAAjB,GAA4BV,CAAC,CAACU,QAA9B;MACAb,UAAU,CAACL,KAAX,CAAiBX,WAAjB,GAA+BmB,CAAC,CAACnB,WAAjC;MACAgB,UAAU,CAACL,KAAX,CAAiBmB,KAAjB,GAAyBX,CAAC,CAACW,KAA3B;MACAd,UAAU,CAACL,KAAX,CAAiBoB,IAAjB,GAAwBZ,CAAC,CAACY,IAA1B;MACAf,UAAU,CAACL,KAAX,CAAiBqB,MAAjB,GAA0Bb,CAAC,CAACa,MAA5B;MACAhB,UAAU,CAACL,KAAX,CAAiBV,QAAjB,GAA4BkB,CAAC,CAAClB,QAA9B,CAlBkC,CAmBlC;IACD,CApBD;;IAsBA,MAAMgC,UAAU,GAAG,MAAOb,MAAP,IAAkB;MACnC,MAAMD,CAAC,GAAG,MAAMhC,QAAQ,CAACS,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAAxB;MACAY,OAAO,CAACC,GAAR,CAAYS,CAAC,CAACe,MAAd;;MACA,IAAIf,CAAC,CAACgB,MAAF,GAAW,CAAf,EAAkB;QAChBjD,SAAS,CAACkD,KAAV,CAAgB,oCAAhB;QACA;MACD;;MACDjC,eAAe,CAACE,cAAhB,GAAiCe,MAAjC;MACA5B,YAAY,CAACmB,KAAb,GAAqB,IAArB;MACAlB,WAAW,CAACkB,KAAZ,GAAoB,MAAM5B,OAAO,CAACa,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAAjC;IACD,CAVD;;IAWA,MAAMwC,mBAAmB,GAAIC,GAAD,IAAS;MACnC7B,OAAO,CAACC,GAAR,CAAY4B,GAAZ;MACAnC,eAAe,CAACC,eAAhB,GAAkCkC,GAAG,CAAClB,MAAtC;MACAX,OAAO,CAACC,GAAR,CAAYP,eAAZ;MACAM,OAAO,CAACC,GAAR,CAAYJ,WAAZ;IACD,CALD;;IAMA,MAAMiC,iBAAiB,GAAG,YAAY;MACpC;MACA;MACA,IAAIpC,eAAe,CAACC,eAAhB,KAAoC,EAAxC,EAA4C;QAC1C,MAAMkC,GAAG,GAAG,MAAMtD,OAAO,CAACmB,eAAD,CAAzB;QACAM,OAAO,CAACC,GAAR,CAAY4B,GAAZ;QACA9C,YAAY,CAACmB,KAAb,GAAqB,KAArB;QACApB,YAAY,CAACoB,KAAb,GAAqB,KAArB;QACArB,YAAY,CAACqB,KAAb,GAAqB,KAArB;QACAzB,SAAS,CAACsD,IAAV,CAAe,qBAAf;QACA,MAAMvD,MAAM,CAACwD,IAAP,CAAY,gBAAZ,CAAN;MACD,CARD,MAQO;QACLvD,SAAS,CAACkD,KAAV,CAAgB,iCAAhB;MACD;IACF,CAdD,EAgBA;;;IACA,MAAMM,gBAAgB,GAAG,MAAM;MAC7B,MAAMzC,QAAQ,GAAGe,UAAU,CAACL,KAAX,CAAiBV,QAAlC;MACAQ,OAAO,CAACC,GAAR,CAAY,mBAAmBT,QAA/B;MACA,IAAIkB,CAAC,GAAG,IAAR;;MACA,IAAIlB,QAAQ,KAAK,CAAjB,EAAoB;QAClBkB,CAAC,GAAG,OAAJ;MACD;;MACD,IAAIlB,QAAQ,GAAG,CAAX,IAAgBA,QAAQ,IAAI,IAAhC,EAAsC;QACpCkB,CAAC,GAAG,SAAJ;MACD;;MACD,IAAIlB,QAAQ,GAAG,IAAX,IAAmBA,QAAQ,IAAI,EAAnC,EAAuC;QACrCkB,CAAC,GAAG,SAAJ;MACD;;MACD,IAAIlB,QAAQ,GAAG,IAAX,IAAmBA,QAAQ,IAAI,KAAnC,EAA0C;QACxCkB,CAAC,GAAG,QAAJ;MACD;;MACD,IAAIlB,QAAQ,GAAG,KAAf,EAAsB;QACpBkB,CAAC,GAAG,SAAJ;MACD;;MACDV,OAAO,CAACC,GAAR,CAAY,gBAAgBS,CAA5B;MACA,OAAO;QACLwB,UAAU,EAAExB;MADP,CAAP;IAGD,CAvBD;;IAwBA,MAAMyB,SAAS,GAAG,CAAC;MACjB1B,GADiB;MAEjB2B;IAFiB,CAAD,KAGZ;MACJ,IAAIC,GAAG,GAAG,IAAIC,MAAJ,CAAWrD,IAAI,CAACiB,KAAL,CAAWb,OAAtB,EAA+B,GAA/B,CAAV;;MACA,IAAIT,UAAU,CAACsB,KAAX,KAAqB,SAArB,KAAoCmC,GAAG,CAACE,IAAJ,CAAS9B,GAAG,CAACG,KAAb,KAAuBwB,MAAM,CAACI,QAAP,KAAoB,OAA5C,IAAyDH,GAAG,CAACE,IAAJ,CAAS9B,GAAG,CAACM,WAAb,KAA6BqB,MAAM,CAACI,QAAP,KAAoB,aAA7I,CAAJ,EAAkK;QAChK,OAAO;UACLN,UAAU,EAAE;QADP,CAAP;MAGD;IACF,CAVD","names":["computed","ref","Search","searchItems","itemDetail","myItems","addSwap","router","ElMessage","mainPage","isButtonDisabled","activeName","outerVisible","innerVisible","thirdVisible","myItemsData","form","email","localStorage","getItem","keyword","search_type","postal_code","distance","searchResult","swapRequestData","proposed_itemID","desired_itemID","ableConfirm","myItemID","handleSearchTabChange","console","log","value","searchTitle","handleSearch","token","key_word","detailData","handleDetail","row","x","itemID","title","game_type","v_platform","description","condition","media","c_platform","piece","nickname","state","city","rating","handleSwap","ua_cnt","ur_cnt","error","handleCurrentChange","res","handleConfirmSwap","info","push","setDistanceStyle","background","setCellBG","column","reg","RegExp","test","property"],"sources":["/Users/alzhong/Personal/Projects/FamilyCareInventory/frontend/src/views/MainView/SearchItemsView/SearchItemsView.vue"],"sourcesContent":["<template>\n  <div class=\"search-container\">\n    <el-tabs\n        v-model=\"activeName\"\n        type=\"card\"\n        class=\"demo-tabs\"\n        @tab-change=\"alert('changed')\"\n    >\n      <el-tab-pane label=\"By keyword\" name=\"keyword\">\n        <el-form>\n          <el-form-item>\n            <el-input v-model=\"form.keyword\"\n                      placeholder=\"Please input keyword in either the name/title or description\"\n                      @keyup.enter=\"handleSearch\"/>\n          </el-form-item>\n          <el-button\n              type=\"primary\"\n              :icon=\"Search\"\n              @click=\"handleSearch\"\n              size=\"large\"\n              :disabled=\"form.keyword.length===0\"\n          >Search\n          </el-button>\n        </el-form>\n      </el-tab-pane>\n      <el-tab-pane label=\"In my postal code\" name=\"myZip\">\n        <el-button\n            type=\"primary\"\n            :icon=\"Search\"\n            @click=\"handleSearch\"\n            size=\"large\"\n        >Search\n        </el-button>\n      </el-tab-pane>\n      <el-tab-pane label=\"Within given distance\" name=\"nearDist\">\n        <el-input-number v-model=\"form.distance\" :step=\"0.1\" :min=\"0\" placeholder=\"Distance\" @keyup.enter=\"handleSearch\"/>\n        <el-button\n            type=\"primary\"\n            :icon=\"Search\"\n            @click=\"handleSearch\"\n            size=\"large\"\n            :disabled=\"form.distance===''\"\n        >Search\n        </el-button>\n      </el-tab-pane>\n      <el-tab-pane label=\"In given postal code\" name=\"inZip\">\n        <el-input v-model=\"form.postal_code\"\n                  placeholder=\"Please input valid postal code\"\n                  @keyup.enter=\"handleSearch\"/>\n        <el-button\n            type=\"primary\"\n            :icon=\"Search\"\n            @click=\"handleSearch\"\n            size=\"large\"\n            :disabled=\"form.postal_code===''\"\n        >Search\n        </el-button>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n  <el-dialog v-model=\"outerVisible\" :title=\"'Search Result: '+ searchTitle\" top=\"50px\">\n    <template #default>\n      <el-dialog\n          v-model=\"innerVisible\"\n          width=\"30%\"\n          append-to-body\n          top\n          center\n      >\n        <el-descriptions title=\"Item Detail\" :column=\"1\">\n          <el-descriptions-item label=\"Item #:\">{{ detailData.itemID }}</el-descriptions-item>\n          <el-descriptions-item label=\"Title:\">{{ detailData.title }}</el-descriptions-item>\n          <el-descriptions-item label=\"Game type:\">{{ detailData.game_type }}</el-descriptions-item>\n          <el-descriptions-item label=\"Condition:\">{{ detailData.condition }}</el-descriptions-item>\n          <el-descriptions-item label=\"Description:\" v-if=\"detailData.description.length>0\">{{\n              detailData.description\n            }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"Console Platform:\" v-if=\"detailData.game_type === 'Video game'\">\n            {{ detailData.v_platform }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"Media:\" v-if=\"detailData.game_type === 'Video game'\">{{\n              detailData.media\n            }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"Computer System Platform:\" v-if=\"detailData.game_type === 'Computer game'\">\n            {{ detailData.c_platform }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"Jigsaw Pieces Number:\" v-if=\"detailData.game_type === 'Jigsaw puzzle'\">\n            {{ detailData.piece }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"Offer by:\">{{ detailData.nickname }}</el-descriptions-item>\n          <el-descriptions-item label=\"Location:\">{{ detailData.city }}, {{ detailData.state }}\n            {{ detailData.postal_code }}\n          </el-descriptions-item>\n          <el-descriptions-item label=\"Rating:\">{{ detailData.rating }}</el-descriptions-item>\n          <el-descriptions-item label=\"Distance:\" v-if=\"activeName !== 'myZip'\">\n            <span :style=\"setDistanceStyle()\">\n              {{ detailData.distance.toFixed(1) }} miles\n            </span>\n          </el-descriptions-item>\n        </el-descriptions>\n        <el-button type=\"primary\" @click=\"handleSwap(detailData.itemID)\" size=\"large\">Propose Swap</el-button>\n        <el-dialog\n            v-model=\"thirdVisible\"\n            width=\"70%\"\n            title=\"Propose Swap\"\n            append-to-body\n        >\n          <div class=\"warning-bar\" v-if=\"detailData.distance>100\" style=\"background: red\"><p\n              style=\"font-size: large;color: #d3dce6\">the other user is\n            {{ detailData.distance.toFixed(1) }} miles away from you!</p>\n          </div>\n          <p> you are proposing a trade for </p>\n          <p>{{ detailData.title }}</p>\n          <p>Please choose your proposed item </p>\n          <el-table :data=\"myItemsData\"\n                    style=\"width: 100%\"\n                    table-layout: auto\n                    highlight-current-row\n                    @current-change=\"handleCurrentChange\">\n            <el-table-column prop=\"itemID\" label=\"Item ID\"/>\n            <el-table-column prop=\"game_type\" label=\"Game Type\"/>\n            <el-table-column prop=\"title\" label=\"Title\"/>\n            <el-table-column prop=\"condition\" label=\"Condition\"/>\n          </el-table>\n          <el-button\n              type=\"primary\"\n              @click=\"handleConfirmSwap\"\n              size=\"large\"\n          >Confirm\n          </el-button>\n        </el-dialog>\n      </el-dialog>\n    </template>\n    <template #footer>\n      <div class=\"dialog-footer\">\n        <el-table :data=\"searchResult\" stripe style=\"width: 500%\" height=\"800\" table-layout: auto :cell-style=\"setCellBG\">\n          <el-table-column prop=\"itemID\" label=\"Item ID\"/>\n          <el-table-column prop=\"game_type\" label=\"Game Type\" width=\"150%\"/>\n          <el-table-column prop=\"title\" label=\"Game Title\" width=\"120%\"/>\n          <el-table-column prop=\"condition\" label=\"Condition\"/>\n          <el-table-column prop=\"description\" label=\"Description\"/>\n          <el-table-column prop=\"distance\" label=\"Distance\"/>\n          <el-table-column label=\"Actions\">\n            <template #default=\"{ row }\">\n              <el-button type=\"text\" size=\"small\" @click=\"handleDetail(row)\"\n              >Detail\n              </el-button\n              >\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n    </template>\n  </el-dialog>\n</template>\n<script setup>\n/* eslint-disable */\nimport { computed, ref } from 'vue'\nimport { Search } from '@element-plus/icons-vue'\nimport { searchItems } from '@/api/searchItems'\nimport { itemDetail } from '@/api/itemDetail'\nimport { myItems } from '@/api/myItems'\nimport { addSwap } from '@/api/addSwap'\nimport router from '@/router'\nimport { ElMessage } from 'element-plus'\nimport { mainPage } from '@/api/main_page'\n// eslint-disable-next-line no-unused-vars\nconst isButtonDisabled = ref(true)\nconst activeName = ref('keyword')\nconst outerVisible = ref(false)\nconst innerVisible = ref(false)\nconst thirdVisible = ref(false)\nconst myItemsData = ref([])\nconst form = ref({\n  email: localStorage.getItem('token'),\n  keyword: '',\n  search_type: '',\n  postal_code: '',\n  distance: ''\n})\nconst searchResult = ref([])\nconst swapRequestData = {\n  proposed_itemID: '',\n  desired_itemID: ''\n}\n// eslint-disable-next-line no-unused-vars\nconst ableConfirm = computed(() => {\n  return swapRequestData.myItemID === ''\n})\n// eslint-disable-next-line no-unused-vars\nconst handleSearchTabChange = () => {\n  console.log('changed')\n  form.value = {\n    email: localStorage.getItem('token'),\n    keyword: '',\n    search_type: '',\n    postal_code: '',\n    distance: ''\n  }\n}\nconst searchTitle = ref('')\nconst handleSearch = async () => {\n  // eslint-disable-next-line no-empty\n  switch (activeName.value) {\n    case 'keyword':\n      searchResult.value = await searchItems({\n        token: localStorage.getItem('token'),\n        search_type: 'key word',\n        key_word: form.value.keyword\n      })\n      console.log(searchResult)\n      searchTitle.value = 'keyword ' + '\"' + form.value.keyword + '\"'\n      outerVisible.value = true\n      break\n    case 'myZip':\n      searchResult.value = await searchItems({\n        token: localStorage.getItem('token'),\n        search_type: 'my postal code'\n        // key_word: form.value.keyword\n      })\n      searchTitle.value = 'my postal code'\n      outerVisible.value = true\n      break\n    case 'nearDist':\n      searchResult.value = await searchItems({\n        token: localStorage.getItem('token'),\n        search_type: 'distance',\n        distance: form.value.distance\n      })\n      searchTitle.value = 'distance in ' + form.value.distance + ' miles'\n      outerVisible.value = true\n      break\n    case 'inZip':\n      searchResult.value = await searchItems({\n        token: localStorage.getItem('token'),\n        search_type: 'postal code',\n        postal_code: form.value.postal_code\n      })\n      searchTitle.value = 'postal code in ' + form.value.postal_code\n      outerVisible.value = true\n      break\n    default:\n      break\n  }\n}\nconst detailData = ref({})\nconst handleDetail = async (row) => {\n  const x = await itemDetail(row.itemID, localStorage.getItem('token'))\n  innerVisible.value = true\n  console.log(x)\n  detailData.value.itemID = x.itemID\n  detailData.value.title = x.title\n  detailData.value.game_type = x.game_type\n  detailData.value.v_platform = x.v_platform\n  detailData.value.description = x.description\n  detailData.value.condition = x.condition\n  detailData.value.media = x.media\n  detailData.value.c_platform = x.c_platform\n  detailData.value.piece = x.piece\n  detailData.value.nickname = x.nickname\n  detailData.value.postal_code = x.postal_code\n  detailData.value.state = x.state\n  detailData.value.city = x.city\n  detailData.value.rating = x.rating\n  detailData.value.distance = x.distance\n  // setDistanceStyle()\n}\n\nconst handleSwap = async (itemID) => {\n  const x = await mainPage(localStorage.getItem('token'))\n  console.log(x.ua_cnt)\n  if (x.ur_cnt > 2) {\n    ElMessage.error('You have more than 2 unrated swaps')\n    return\n  }\n  swapRequestData.desired_itemID = itemID\n  thirdVisible.value = true\n  myItemsData.value = await myItems(localStorage.getItem('token'))\n}\nconst handleCurrentChange = (res) => {\n  console.log(res)\n  swapRequestData.proposed_itemID = res.itemID\n  console.log(swapRequestData)\n  console.log(ableConfirm)\n}\nconst handleConfirmSwap = async () => {\n  // console.log()\n  // eslint-disable-next-line\n  if (swapRequestData.proposed_itemID !== '') {\n    const res = await addSwap(swapRequestData)\n    console.log(res)\n    thirdVisible.value = false\n    innerVisible.value = false\n    outerVisible.value = false\n    ElMessage.info('You proposed 1 swap')\n    await router.push('/Main/MainPage')\n  } else {\n    ElMessage.error('Must select one Item to swap!!!')\n  }\n}\n\n// eslint-disable-next-line no-unused-vars\nconst setDistanceStyle = () => {\n  const distance = detailData.value.distance\n  console.log('distance is : ' + distance)\n  let x = null\n  if (distance === 0) {\n    x = 'white'\n  }\n  if (distance > 0 && distance <= 25.0) {\n    x = '#00ff00'\n  }\n  if (distance > 25.0 && distance <= 50) {\n    x = '#ffff00'\n  }\n  if (distance > 50.0 && distance <= 100.0) {\n    x = 'orange'\n  }\n  if (distance > 100.0) {\n    x = '#FF0000'\n  }\n  console.log('color is : ' + x)\n  return {\n    background: x\n  }\n}\nconst setCellBG = ({\n  row,\n  column\n}) => {\n  var reg = new RegExp(form.value.keyword, 'i')\n  if (activeName.value === 'keyword' && ((reg.test(row.title) && column.property === 'title') || (reg.test(row.description) && column.property === 'description'))) {\n    return {\n      background: '#87CEFA'\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.search-container {\n  margin-left: 200px;\n  width: 800px;\n  //height: 500px;\n  border: #42b983;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}